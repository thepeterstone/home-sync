#!/bin/bash

# We're located in bin/
ROOT=$(cd $(dirname $(dirname $0)); pwd)

main() {
    rm -rf $ROOT/backups; mkdir $ROOT/backups

    for file in $(ls $ROOT/dot-files); do
        backupAndReplace $file
    done
}

backupAndReplace() {
    [ -e $HOME/.$1 ] && mv -f $HOME/.$1 $ROOT/backups/$1
    # this needs to be forced because -e returns false for a dangling symlink
    ln -sf $ROOT/dot-files/$1 $HOME/.$1
}

main
